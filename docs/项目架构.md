
项目设计目的是为了用户能够在查找最少的辅助文档以及API的情况下, 完成对关系数据库，
NoSQL以及MPP型数据库的查询分析。这个是项目的核心需求。此外, 为了扩展多个用户对平台功能
的使用, 项目会对多租户进行隔离, 此外对于用户的角色进行了更加细致的权限粒度划分。

#### 统一SQL执行引擎

对于当下最常使用的数据库MySQL, 项目支持MySQL方言为基准, 其他类型数据库像其看齐的方式,
解决了常用关系型数据库方言不一致的问题, 使得在关系型数据库下, 可以屏蔽底层方言区别去进行
查询功能的实现。

对于非关系型数据库, 例如Redis, MongoDB, ElasticSearch 我们也会支持其SQL语义。
使得可以通过SQL的方式进行对数据库的访问。

对于MPP类型数据库, 例如Hive, Spark等等, 不仅需要统一SQL语义, 此外这类查询往往具有较高的
延迟性。需要支持异步查询的功能, 此外由于ETL经常需要定时调度, 因此这里需要支持定时调度的实现。


##### 关于标准的选取
MySQL 较低版本中有一些功能没有实现, 使得在适配Oracle,Spark,Hive这类功能比较强大的SQL的时候,
功能显得较为缺乏, 因此这里我们需要将MySQL的版本提升到8.0以上, 这样窗口函数才能会得到支持。

##### 关于Parser的制作以及相关的代码生成
由于Mysql的Parser是基于bison处理的, 且格式相对于PostgreSQL来说显得较为晦涩难懂,
且项目中需要使用Apache Calcite对Parser进行重写, 在重写的过程中嵌入对应SQL引擎的
执行器功能以及代码校验的功能, 所以原始的bison代码需要作为参考, 再次基础上重写Parser。

技术细节请参考详细的设计文档。

#### 多租户
通常情况下, 对于一个平台应用的访问, 总是会有多个用户同时进行, 当用户对于同一个资源进行
访问的时候会出现下述情况。

1. A用户可以访问R资源, B用户不可以访问
这种状况下, 需要做好用户权限的控制, 保证在授权的时候B用户拿不到权限去执行访问即可, 基于
权限的RBAC设计也是多租户的一个基础.

2. AB用户都可以访问R资源, 且仅仅持有读取权限
这种情况下在进行鉴权之后, 进行读取即可。不需要考虑到写入冲突的问题。

3. AB用户都可以访问R资源, 且至少一个持有写入权限
当持有写入权限的用户发起写入请求的时候, 这个时候无论另一个用户进行何种操作, 执行的顺序都会
对执行结果产生影响, 所以这里需要对请求进行排序再进行执行, 在客户端的表现在必须阻塞等待上一个
写入操作的完成(同步执行的情况下)。在异步执行的情况下, 则需要显示当前服务器执行的队列信息即可。

详细请参考设计文档。


#### 用户登录

用户通过账号密码登录到平台中, 考虑到不需要多个应用同时登录系统, 所以SSO的方式是不合适的, 使用
jwt进行登录逻辑处理即可, 这个模块是个通用的模块, 较容易实现。


#### 服务器状态的存储与恢复

在DBMS中需要进行容错处理, 通常需要使用日志进行恢复的操作。作为一个平台类型的应用, 假设某天应用
宕机或者是需要停机升级, 虽然不像DBMS那样管理大量数据, 但是一些任务和系统的元数据信息还是要进行
恢复的, 所以需要定期的的系统的正在能够通进行存储。以保证恢复的时候可以持有历史数据。

这里通过将操作记录信息存储到Redis中, 基于Redis的RDB以及AOF机制保证操作记录不会丢失。当系统重
新启动的时候, 读取Redis中相关的元数据信息, 恢复到服务端的状态信息即可。

这里对于MPP类型离线任务来说, 同步执行和异步执行是相当不同的处理方式, 详细情况参考设计文档。